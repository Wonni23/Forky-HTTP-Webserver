http {

    client_max_body_size 100M; # Set the maximum allowed size for client request bodies. (http 블록 안에서 설정하면 모든 서버와 위치에 대한 기본값으로 설정됨)

    server {
        listen 192.168.1.100:8080 default_server; # Choose the port and host of each 'server'. The first server for a host:port will be default for this host:port.
        # listen 80; # 다른 listen 예시
        server_name example.com; # Set up the 'server_names' or not.
        client_max_body_size 2000M; # Set the maximum allowed size for client request bodies. (특정 서버 블록에서만 이 설정을 적용하고 싶다면 server 블록 내에서 설정)

        location /admin/ {
            limit_except GET HEAD { # Define a list of accepted HTTP methods for the route.
                deny all;
            }
        }

        location /old-page {
            return 301 http://example.com/new-page; # Define an HTTP redirect. (해당 location 블록의 경로와 일치하는 요청에 대해서만 리다이렉션이 적용됨)
        }

        location /static/ {
            root /usr/share/nginx/; # Define a directory or file where the requested file should be located
            autoindex on; # Enable or disable directory listing. (off 시 404 Not Found. server, location 컨텍스트에서 사용 가능)
            index index.html; # Set a default file to serve when the request is for a directory. (server, location 컨텍스트에서 사용 가능)
        }

        location /cgi-bin/ {
            root /usr/lib/cgi-bin;
            cgi_pass unix:/var/run/fcgiwrap.socket;

            limit_except GET POST {
                deny all;
            }

            client_max_body_size 100M;
            autoindex off; # (보안을 위해서 디렉토리로 접근시 파일 리스트 off)
        }

        location /uploads/ {
            root /src/uploads;
            client_max_body_size 1000M;
            autoindex off;
            limit_except POST PUT { # 보통 업로드 디렉토리에는 파일 업로드를 제외한 다른 HTTP 메소드를 허용하지 않음
                deny all;
            }
        }

        # return 301 redirected.com; # Define an HTTP redirect. (해당 server 블록으로 들어오는 모든 요청에 대해 즉시 리다이렉션이 적용됨. 즉, location 블록을 찾지 않고 바로 리다이렉션됨)
        # (return 이 없는 경우 요청된 URI를 기반으로 가장 적합한 location 블록을 찾음. 적합한 location 블록이 없으면 404 Not Found 응답을 반환함)
    }

    #Set up default error pages.
    error_page 404 /error.html;
    location = /error.html {
        root /usr/share/nginx/html; # 여기가 비어있다면 nginx 는 아무 동작도 하지 않고, 기본 동작(404 Not Found)을 수행함. (기본적으로 /usr/share/nginx/html/error.html 파일을 찾음)
    }
}